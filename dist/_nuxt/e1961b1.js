(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{512:function(t,e,n){"use strict";n.r(e);var o=n(29),r=(n(98),n(28),n(37),n(234)),c=n.n(r),l={data:function(){return{isLoadChat:!1,isLoading:!1,buttonLoad:!1,confirmation:!1,items:[],chatList:[],name:"",channel:"",users:[],message:"",channel_id:""}},mounted:function(){this.listingGetall()},methods:{confirm:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.buttonLoad=!0,e.next=3,t.$axios.delete("/channel/".concat(t.channel_id,"/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.$axios.post("/transactions/",{label:"Your transaction with ".concat(localStorage.getItem("firstname")," ").concat(localStorage.getItem("lastname")," is successful"),user_id:t.users.id,customer_name:"".concat(t.users.firstname," ").concat(t.users.lastname),customer_id:localStorage.getItem("id"),image:t.users.image},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(){})),t.$axios.post("/transactions/",{label:"You set a transaction as mark as sold for ".concat(t.users.firstname," ").concat(t.users.lastname),user_id:localStorage.getItem("id"),customer_name:"".concat(t.users.firstname," ").concat(t.users.lastname),customer_id:t.users.id,image:t.users.image},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(){t.$axios.post("/sold/",{user_id:localStorage.getItem("id"),customer_name:"".concat(t.users.firstname," ").concat(t.users.lastname),customer_id:t.users.id,image:t.users.image},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(){window.location.href="/seller/messages",t.buttonLoad=!1}))}))}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))()},showChat:function(t){var e=this;this.isLoadChat=!0,this.name=t.users.firstname,this.channel=t.channel,this.channel_id=t.id,this.users=t.users;this.$axios.post("/chatgetall/",{channel:this.channel},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){e.isLoadChat=!1,e.chatList=t.data}));(t=new c.a("33efacb6a0d9c7baad00",{cluster:"ap1"}).subscribe(this.channel)).bind("my-test",(function(data){var t=this;this.$axios.post("/chatgetall/",{channel:this.channel},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.chatList=e.data}))}),this)},sendMessage:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("/sendMessage/",{channel:t.channel,message:t.message,chat:t.message,account_type:localStorage.getItem("account_type")},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){}));case 2:e.sent,t.message="";case 4:case"end":return e.stop()}}),e)})))()},listingGetall:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$axios.get("/channel-admin/Admin/1/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.isLoading=!1,console.log(e.data),t.items=e.data}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))()}}},d=n(97),m=n(141),h=n.n(m),v=n(230),f=n(215),_=n(181),k=n(485),x=n(448),w=n(449),C=n(477),L=n(214),y=n(178),I=n(218),V=n(136),S=n(221),A=n(96),B=n(453),$=n(500),z=n(454),R=n(480),M=n(58),T=n(229),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{align:"start"}},[n("v-dialog",{attrs:{width:"500",persistent:""},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}},[n("v-card",{staticClass:"pa-10"},[n("div",{staticClass:"text-h6",attrs:{align:"center"}},[t._v("Mark as sold")]),t._v(" "),n("div",{staticClass:"pa-10",attrs:{align:"center"}},[t._v("\n      Are you sure you want to set as sold?\n  ")]),t._v(" "),n("v-card-actions",[n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{align:"end"}},[n("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.confirmation=!1}}},[t._v(" Cancel ")])],1),t._v(" "),n("v-col",[n("v-btn",{attrs:{color:"success",loading:t.buttonLoad,text:""},on:{click:t.confirm}},[t._v(" Confirm ")])],1)],1)],1)],1)],1),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"auto"}},[n("v-card",{attrs:{"max-width":"450"}},[t.isLoading?n("v-skeleton-loader",{staticClass:"mx-auto pt-10",attrs:{width:"300",type:"card"}}):t._e(),t._v(" "),t.isLoading?n("v-skeleton-loader",{staticClass:"mx-auto pt-10",attrs:{width:"300",type:"card"}}):t._e(),t._v(" "),n("v-list",{attrs:{"three-line":""}},[t._l(t.items,(function(e){return[n("v-list-item",{key:e,on:{click:function(n){return t.showChat(e)}}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:e.users.image}})],1),t._v(" "),n("div",[n("v-list-item-content",[n("v-list-item-title",{domProps:{innerHTML:t._s(e.users.firstname)}}),t._v(" "),n("v-list-item-subtitle",[t._v("A conversation between you and "+t._s(e.users.firstname))])],1)],1),t._v(" "),n("v-divider")],1)]}))],2)],1)],1),t._v(" "),""!=t.channel?n("v-col",[n("v-card",{attrs:{elevation:"5"}},[n("v-toolbar",{attrs:{color:"cyan",dark:""}},[n("v-toolbar-title",[t._v(t._s(t.name))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{on:{click:function(e){t.confirmation=!0}}},[t._v("mdi-handshake")])],1)],1),t._v(" "),t.isLoadChat?n("v-skeleton-loader",{staticClass:"mx-auto pt-10",attrs:{width:"300",type:"card"}}):t._e(),t._v(" "),t.isLoadChat?n("v-skeleton-loader",{staticClass:"mx-auto pt-10",attrs:{width:"300",type:"card"}}):t._e(),t._v(" "),n("div",{staticStyle:{height:"500px",overflow:"scroll"}},t._l(t.chatList,(function(e){return n("div",{key:e,staticClass:"pa-5",attrs:{align:"Customer"!=e.account_type?"end":"start"}},[n("v-chip",{staticStyle:{"border-radius":"15px",padding:"25px",color:"#344557"}},[n("span",[t._v(t._s(e.chat))])])],1)})),0),t._v(" "),n("div",{staticClass:"d-flex align-end"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[n("v-text-field",{attrs:{outlined:"","hide-details":"","append-icon":"mdi-send"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)},"click:append":t.sendMessage},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],1)],1)],1)],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{VBtn:v.a,VCard:f.a,VCardActions:_.a,VChip:k.a,VCol:x.a,VDialog:w.a,VDivider:C.a,VIcon:L.a,VImg:y.a,VList:I.a,VListItem:V.a,VListItemAvatar:S.a,VListItemContent:A.a,VListItemSubtitle:A.b,VListItemTitle:A.c,VRow:B.a,VSkeletonLoader:$.a,VSpacer:z.a,VTextField:R.a,VToolbar:M.a,VToolbarTitle:T.a})}}]);